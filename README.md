# 武汉大学嵌入式综合设计（验收被狠狠拷打但侥幸通过版）

## 项目概述

本项目是一个基于 STM32F4 系列微控制器的嵌入式系统综合设计。系统旨在集成多种外设，实现环境参数的感知、数据的处理与显示、以及对执行机构的控制。主要特色包括基于光照强度的舵机、跑马灯、风扇的联动控制、通过ZLG7290芯片进行按键输入与数据显示、支持热启动状态恢复以及通过独立看门狗保障系统稳定性。

## 主要功能模块

*   **主控制器**: 采用 STM32F4xx 系列微控制器作为核心处理器。
*   **环境感知**:
    *   通过 ADC (Analog-to-Digital Converter) 采集模拟信号-**光照强度**。代码中定义了 `light_value` 变量用于存储光照传感器数据。
*   **执行机构控制**:
    *   **舵机控制 (Steering Engine)**: 包含 `Steering_Engine.h`，并通过 `servoAngle` 变量控制舵机角度，舵机角度其实就是光照传感器的值。
*   **人机交互**:
    *   **ZLG7290 键盘与显示控制**: 包含 `zlg7290.h` 和 `i2c.h`，按键主要有以下功能：
        *   1,2,3键位：切换采样频率，分别对应25ms、50ms、75ms
        *   A、B键位：打开/关闭  跑马灯/风扇功能（只有超过阈值且该功能打开才能触发跑马灯和风扇！）
        *   C键位：清楚A、B带来的使能信号。
    *   七段数码管
        *   数码管的值就是传感器的值，最左边是档位
    *   蜂鸣器
        *   当超过阈值时，蜂鸣器会激活。
*   **系统特性**:
    *   **热启动 (Hot Start)**: 定义了 `HOT_START_FLAG_VALUE` 和 `HOT_START_VALIDATION_FLAG_VALUE`，表明系统设计了热启动功能。这通常意味着系统可以将关键运行状态保存在非易失性存储（如备份SRAM）中，在系统复位后能够快速恢复到之前的状态，而不是完全冷启动。
    *   **多重备份和修复**：系统共设置1个主备份区和3个备用备份区，用以交叉验证和恢复数据，实现抗数据攻击。
    *   **独立看门狗 (IWDG)**: 包含 `stm32f4xx_hal_iwdg.h`，用于在程序发生意外卡死时自动复位系统，提高系统的可靠性。
    *   随机序列执行、随机延迟、休眠等等功能

## 已知“特性”

*   在验收环节可能需要强大的心理素质和一点点运气😉。我们已经尽力把能改都改了，但是总共经历了3次验收才“勉强通过”，主要是考虑的不全面外加自身能力有限。所以希望这份“代码”能帮助到你！

---